<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HHJJ ë„ì–´ë½ AI ì‹œë®¬ë ˆì´í„°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .scenario-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .scenario-btn {
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        .scenario-btn.normal { background: linear-gradient(135deg, #84fab0, #8fd3f4); }
        .scenario-btn.loitering { background: linear-gradient(135deg, #fbc2eb, #a6c1ee); }
        .scenario-btn.intrusion { background: linear-gradient(135deg, #fa709a, #fee140); }
        .scenario-btn.critical { background: linear-gradient(135deg, #ff0844, #ffb199); }
        .scenario-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .sensor-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .sensor-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .sensor-label { font-size: 0.85em; color: #666; margin-bottom: 5px; }
        .sensor-value { font-size: 1.3em; font-weight: bold; color: #333; }
        .sensor-bar { height: 8px; background: #e0e0e0; border-radius: 4px; margin-top: 8px; overflow: hidden; }
        .sensor-bar-fill { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.3s; }
        
        .risk-display {
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            transition: all 0.5s;
        }
        .risk-display.LOW { background: linear-gradient(135deg, #84fab0, #8fd3f4); color: white; }
        .risk-display.MEDIUM { background: linear-gradient(135deg, #fbc2eb, #a6c1ee); color: white; }
        .risk-display.HIGH { background: linear-gradient(135deg, #fa709a, #fee140); color: white; }
        .risk-display.CRITICAL { background: linear-gradient(135deg, #ff0844, #ffb199); color: white; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        
        .risk-level { font-size: 2.5em; font-weight: bold; margin-bottom: 10px; }
        .controls { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
        .control-btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 0.95em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        .control-btn.start { background: #4CAF50; }
        .control-btn.reset { background: #2196F3; }
        .control-btn:hover { transform: translateY(-2px); }
        
        .timeline { margin-top: 15px; padding: 15px; background: white; border-radius: 10px; max-height: 200px; overflow-y: auto; }
        .timeline-item { padding: 8px; margin-bottom: 8px; border-left: 3px solid #667eea; padding-left: 10px; background: #f8f9fa; border-radius: 5px; font-size: 0.9em; }
        .action-list { list-style: none; padding: 0; }
        .action-item { padding: 10px; margin-bottom: 6px; background: white; border-radius: 8px; border-left: 4px solid #667eea; font-weight: 500; font-size: 0.9em; }
        
        @media (max-width: 768px) { .main-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”’ HHJJ ë„ì–´ë½ AI ìœ„í—˜ ê°ì§€ ì‹œë®¬ë ˆì´í„°</h1>
        <p class="subtitle">ì‹¤ì‹œê°„ ë‹¤ì¤‘ì„¼ì„œ ìœµí•© LSTM ìœ„í—˜ë„ íŒì • ì‹œìŠ¤í…œ</p>
        
        <div class="scenario-buttons">
            <button class="scenario-btn normal" onclick="startScenario('normal')">âœ… ì •ìƒ ë°©ë¬¸ì<br><small>(íƒë°°/ê°€ì¡±)</small></button>
            <button class="scenario-btn loitering" onclick="startScenario('loitering')">âš ï¸ ì˜ì‹¬ ë°°íšŒ<br><small>(ì¥ì‹œê°„ ì²´ë¥˜)</small></button>
            <button class="scenario-btn intrusion" onclick="startScenario('intrusion')">ğŸš¨ ì¹¨ì… ì‹œë„<br><small>(ë“œë¦´+ì¶©ê²©)</small></button>
            <button class="scenario-btn critical" onclick="startScenario('critical')">ğŸ†˜ ê°•ì œ íŒŒì†<br><small>(ì™¸í•¨ ê°œë°©)</small></button>
        </div>
        
        <div class="controls">
            <button class="control-btn start" onclick="pauseResume()"><span id="pauseText">â¸ï¸ ì¼ì‹œì •ì§€</span></button>
            <button class="control-btn reset" onclick="resetSimulation()">ğŸ”„ ì´ˆê¸°í™”</button>
        </div>
        
        <div class="main-grid">
            <div class="card">
                <h2 style="color: #667eea;">ğŸ“Š ì„¼ì„œ ë°ì´í„°</h2>
                <div class="sensor-grid">
                    <div class="sensor-item">
                        <div class="sensor-label">ê±°ë¦¬ (ToF)</div>
                        <div class="sensor-value" id="distance-value">300 cm</div>
                        <div class="sensor-bar"><div class="sensor-bar-fill" id="distance-bar"></div></div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">ì²´ë¥˜ ì‹œê°„</div>
                        <div class="sensor-value" id="dwell-value">0 ì´ˆ</div>
                        <div class="sensor-bar"><div class="sensor-bar-fill" id="dwell-bar"></div></div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">ì§„ë™ (IMU)</div>
                        <div class="sensor-value" id="vibration-value">0.0 g</div>
                        <div class="sensor-bar"><div class="sensor-bar-fill" id="vibration-bar"></div></div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">ìŒì•• (ë§ˆì´í¬)</div>
                        <div class="sensor-value" id="audio-value">40 dB</div>
                        <div class="sensor-bar"><div class="sensor-bar-fill" id="audio-bar"></div></div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">ì „ì›</div>
                        <div class="sensor-value" id="power-value">âœ… ì •ìƒ</div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-label">ì™¸í•¨</div>
                        <div class="sensor-value" id="tamper-value">ğŸ”’ ë‹«í˜</div>
                    </div>
                </div>
                <div class="timeline">
                    <h3 style="font-size: 0.95em; margin-bottom: 10px;">â±ï¸ íƒ€ì„ë¼ì¸</h3>
                    <div id="timeline-content"></div>
                </div>
            </div>
            
            <div class="card">
                <h2 style="color: #667eea;">ğŸ¤– AI ìœ„í—˜ë„ íŒì •</h2>
                <div class="risk-display" id="risk-display">
                    <div class="risk-level" id="risk-level">LOW</div>
                    <div id="risk-confidence">ì‹ ë¢°ë„: 0%</div>
                    <div id="elapsed-time" style="margin-top: 10px;">ê²½ê³¼: 0ì´ˆ</div>
                </div>
                <h3 style="margin-top: 15px;">âš¡ ìë™ ëŒ€ì‘</h3>
                <ul class="action-list" id="action-list">
                    <li class="action-item">ëŒ€ê¸° ì¤‘...</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        let currentScenario = null, elapsedTime = 0, simulationInterval = null, isPaused = false;
        let sensorData = { distance: 300, dwellTime: 0, vibration: 0, audio: 40, powerNormal: true, housingOpen: false };
        
        function calculateRisk() {
            let d = (300 - sensorData.distance) / 300;
            let t = Math.min(sensorData.dwellTime / 300, 1);
            let v = Math.min(sensorData.vibration / 10, 1);
            let a = Math.min(Math.max((sensorData.audio - 40) / 80, 0), 1);
            let p = sensorData.powerNormal ? 0 : 1;
            let h = sensorData.housingOpen ? 1 : 0;
            let score = d * 0.25 + t * 0.20 + v * 0.20 + a * 0.15 + p * 0.10 + h * 0.10;
            
            let level = score < 0.3 ? 'LOW' : score < 0.6 ? 'MEDIUM' : score < 0.85 ? 'HIGH' : 'CRITICAL';
            let conf = score < 0.3 ? (0.3-score)/0.3 : score < 0.6 ? (score-0.3)/0.3 : score < 0.85 ? (score-0.6)/0.25 : 1;
            return { riskLevel: level, confidence: conf };
        }
        
        const scenarios = {
            normal: { duration: 40, update: (t) => {
                sensorData.distance = t < 5 ? 200 - t*30 : t < 30 ? 50 : 50 + (t-30)*30;
                sensorData.dwellTime = t; sensorData.audio = t === 10 ? 70 : 40;
                if (t === 10) addEvent('ğŸ”” ë„ì–´ë²¨');
            }},
            loitering: { duration: 120, update: (t) => {
                sensorData.distance = 50 + Math.random()*10-5; sensorData.dwellTime = t;
                if (t === 30) addEvent('âš ï¸ MEDIUM'); if (t === 90) addEvent('ğŸš¨ HIGH');
            }},
            intrusion: { duration: 180, update: (t) => {
                sensorData.distance = 50; sensorData.dwellTime = t;
                if (t > 90) { sensorData.vibration = 3 + Math.random()*2; sensorData.audio = 85 + Math.random()*10; }
                if (t === 91) addEvent('ğŸ”Š ë“œë¦´ìŒ');
            }},
            critical: { duration: 200, update: (t) => {
                sensorData.distance = 50; sensorData.dwellTime = t;
                if (t > 120) { sensorData.vibration = 5 + Math.random()*3; sensorData.audio = 90 + Math.random()*10; }
                if (t > 150) { sensorData.housingOpen = true; if (t === 151) addEvent('ğŸš¨ ì™¸í•¨ ê°œë°©!'); }
                if (t > 180) { sensorData.powerNormal = false; if (t === 181) addEvent('ğŸ†˜ ì „ì› ì°¨ë‹¨!'); }
            }}
        };
        
        function startScenario(name) {
            resetSimulation(); currentScenario = name; addEvent('ì‹œì‘: ' + name);
            simulationInterval = setInterval(() => {
                if (!isPaused && elapsedTime <= scenarios[currentScenario].duration) {
                    elapsedTime++; scenarios[currentScenario].update(elapsedTime); updateDisplay();
                }
            }, 1000);
        }
        
        function updateDisplay() {
            document.getElementById('distance-value').textContent = Math.round(sensorData.distance) + ' cm';
            document.getElementById('dwell-value').textContent = sensorData.dwellTime + ' ì´ˆ';
            document.getElementById('vibration-value').textContent = sensorData.vibration.toFixed(1) + ' g';
            document.getElementById('audio-value').textContent = Math.round(sensorData.audio) + ' dB';
            document.getElementById('power-value').textContent = sensorData.powerNormal ? 'âœ… ì •ìƒ' : 'âŒ ì´ìƒ';
            document.getElementById('tamper-value').textContent = sensorData.housingOpen ? 'ğŸ”“ ì—´ë¦¼' : 'ğŸ”’ ë‹«í˜';
            document.getElementById('elapsed-time').textContent = 'ê²½ê³¼: ' + elapsedTime + 'ì´ˆ';
            
            document.getElementById('distance-bar').style.width = ((300-sensorData.distance)/300*100) + '%';
            document.getElementById('dwell-bar').style.width = (Math.min(sensorData.dwellTime/300,1)*100) + '%';
            document.getElementById('vibration-bar').style.width = (Math.min(sensorData.vibration/10,1)*100) + '%';
            document.getElementById('audio-bar').style.width = (Math.min((sensorData.audio-40)/80,1)*100) + '%';
            
            const risk = calculateRisk();
            document.getElementById('risk-display').className = 'risk-display ' + risk.riskLevel;
            document.getElementById('risk-level').textContent = risk.riskLevel;
            document.getElementById('risk-confidence').textContent = 'ì‹ ë¢°ë„: ' + Math.round(risk.confidence*100) + '%';
            
            const actions = risk.riskLevel === 'LOW' ? ['ğŸ“ ë¡œê·¸'] : risk.riskLevel === 'MEDIUM' ? ['ğŸ“± ì•Œë¦¼','ğŸ“¹ ë…¹í™”'] : risk.riskLevel === 'HIGH' ? ['ğŸš¨ ê¸´ê¸‰ì•Œë¦¼','ğŸ”’ ê°•í™”ì ê¸ˆ','ğŸ“¹ ê³ í™”ì§ˆ','ğŸ“ ê²½ë¹„ì‹¤'] : ['ğŸš“ ê²½ì°°ì‹ ê³ ','ğŸ” ë¹„ìƒì ê¸ˆ','ğŸ“¦ ì¦ê±°ì „ì†¡','ğŸ”Š ì‚¬ì´ë Œ'];
            document.getElementById('action-list').innerHTML = actions.map(a => '<li class="action-item">'+a+'</li>').join('');
        }
        
        function addEvent(txt) {
            const c = document.getElementById('timeline-content'), i = document.createElement('div');
            i.className = 'timeline-item'; i.innerHTML = '<div style="font-size:0.8em;color:#666;">'+elapsedTime+'ì´ˆ</div>'+txt;
            c.insertBefore(i, c.firstChild); while(c.children.length > 8) c.removeChild(c.lastChild);
        }
        
        function pauseResume() {
            isPaused = !isPaused;
            document.getElementById('pauseText').textContent = isPaused ? 'â–¶ï¸ ì¬ê°œ' : 'â¸ï¸ ì¼ì‹œì •ì§€';
        }
        
        function resetSimulation() {
            if (simulationInterval) clearInterval(simulationInterval);
            elapsedTime = 0; isPaused = false;
            sensorData = { distance: 300, dwellTime: 0, vibration: 0, audio: 40, powerNormal: true, housingOpen: false };
            document.getElementById('timeline-content').innerHTML = '';
            document.getElementById('action-list').innerHTML = '<li class="action-item">ëŒ€ê¸° ì¤‘...</li>';
            document.getElementById('pauseText').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';
            updateDisplay();
        }
        
        resetSimulation();
    </script>
</body>
</html>
